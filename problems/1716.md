# 🧩 Problem #1716 – Calculate Money in Leetcode Bank

**Difficulty:** Easy  
**Topics:** `Math`, `Simulation`  
**Link:** [Leetcode](https://leetcode.com/problems/calculate-money-in-leetcode-bank/)

---

## 🧠 Intuition

Hercy deposits money in the bank every day following this pattern:

- On the **first Monday**, he puts `$1`, then each subsequent day that week, he adds `$1` more than the previous day.  
  → So the first week is `1 + 2 + 3 + 4 + 5 + 6 + 7 = 28`.

- On the **next Monday**, he starts with `$2` (one more than the previous Monday), and continues increasing by `$1` each day again.  
  → Second week is `2 + 3 + 4 + 5 + 6 + 7 + 8 = 35`.

This pattern continues — each week starts with `$1` more than the previous week’s Monday.  

So the total after `n` days is made up of:
1. Complete full weeks of deposits.
2. Possibly one **partial week** (the remaining days).

---

### 🎯 Goal
Given `n`, find the **total money saved** at the end of the `n`th day.

We’ll build our understanding in **three logical approaches**:
1. Simulation  
2. Mathematical with weekly sums  
3. Optimized closed-form O(1) formula

---

## 🧩 Approach 1 — Simulation

### 💡 Idea
Simulate Hercy’s saving pattern day by day (or week by week).  
Each new week starts with `$1` more than the previous Monday, and each day in a week increases by `$1`.

```text
WEEK 1: 1+2+3+4+5+6+7 = N(N+1)/2 = (7*8)/2 = 7*4 = 28
WEEK 2: 2+3+4+5+6+7+8 = (N(N+1)/2)-1 = ((8*9)/2)-1; = (4*9)-1 = 35
WEEK 3: 3+4+5+6+7+8+9 = (N(N+1)/2)-3 = ((9*10)/2)-3; = (5*9)-2 = 42
. . .
```

This is the most direct way to compute the result — easy to understand, but not the most efficient.


### 🧮 Steps
1. Initialise:
   - `correction = 0` → tracks how many weeks have passed (and how much Monday’s value has increased).
   - `remainingDays = n`.
   - `total = 0`.
2. For each full week:
   - The sum for a week starting with `correction + 1` is  
     `( (7 + correction) * (8 + correction) / 2 ) - ( correction * (correction + 1) / 2 )`
3. Subtract 7 days from `remainingDays`, increase `correction` by 1.
4. Repeat until no days remain.


### 💻 Code (TypeScript)
```Typescript []
function totalMoney(n: number): number {
  let correction = 0;
  let remainingDays = n;
  let total = 0;

  // O(n/7)
  while (remainingDays > 0) {
    let N = 0;

    if (remainingDays >= 7) N = 7 + correction;
    else N = remainingDays + correction;

    const missing = (correction * (correction + 1)) / 2;
    total += (N * (N + 1)) / 2 - missing;

    remainingDays -= 7;
    correction++;
  }

  return total;
}
```

### ⏱️ Complexity

- **Time:** `O(n / 7)` — iterates through each full week.
- **Space:** `O(1)`.

---

## 🧩 Approach 2 — Weekly Math (closed weekly sum, loop over weeks)

### 💡 Idea
Observe that each full week's sum forms an arithmetic sequence:

```text
WEEK 1: 1+2+3+4+5+6+7     = 28 =      = 7*4
WEEK 2: 2+3+4+5+6+7+8     = 35 = 28+7 = 7*5
WEEK 3: 3+4+5+6+7+8+9     = 42 = 35+7 = 7*6
WEEK 4: 4+5+6+7+8+9+10    = 49 = 42+7 = 7*7
WEEK 5: 5+6+7+8+9+10+11   = 56 = 49+7 = 7*8
WEEK 6: 6+7+8+9+10+11+12  = 63 = 56+7 = 7*9
WEEK 7: 7+8+9+10+11+12+13 = 70 = 63+7 = 7*10
...
```

So full-week sums are `28, 28+7, 28+2*7, ...`. Sum those for all full weeks, then add the leftover partial week using an AP formula.

```text
Sum in AP series
S = n/2 (2a + (n-1)*d);

In our case, d=1, a=(full weeks + 1), n= number of days in not complete week
=> S = R/2 (2(F+1) + (R-1))
```

This is simpler than simulating every day but still uses a short loop over full weeks.

---

### 🧮 Steps
1. Compute `fullWeeks = Math.floor(n / 7)` and `rem = n % 7`.
2. Sum full weeks by starting with `weekSum = 28` and adding `weekSum += 7` each iteration.
3. For the remaining days, compute an AP starting at `start = 1 + fullWeeks` of length `rem`.
4. Return `fullWeeksSum + remSum`.

---

### 💻 Code (TypeScript)
```typescript
function totalMoney(n: number): number {
  const fullWeeks = Math.floor(n / 7);
  const rem = n % 7;

  // Sum full weeks by looping (O(fullWeeks), small)
  let weekBase = 28; // first week total
  let fullWeeksSum = 0;
  for (let i = 0; i < fullWeeks; i++) {
    fullWeeksSum += weekBase;
    weekBase += 7; // next week increases each day by 1 -> total increases by 7
  }

  // Remaining days from an AP starting at 1 + fullWeeks
  const start = 1 + fullWeeks;
  const remSum = rem * (2 * start + (rem - 1)) / 2;

  return fullWeeksSum + remSum;
}
```

### ⏱️ Complexity

- **Time:** `O(fullWeeks)` (at most `O(n/7)` iterations) — tiny for `n ≤ 1000`.
- **Space:** `O(1)`.

---

## 🧩 Approach 3 — Pure Math (O(1) Closed Form)

### 💡 Idea
We can fully eliminate loops using arithmetic series formulas.  
From the previous approach, we observed:

```text
We can write like this ---->
WEEK 1: 1+2+3+4+5+6+7     = 28 =     
WEEK 2: 2+3+4+5+6+7+8     = 35 = 28+1*7
WEEK 3: 3+4+5+6+7+8+9     = 42 = 28+2*7
WEEK 4: 4+5+6+7+8+9+10    = 49 = 28+3*7
WEEK 5: 5+6+7+8+9+10+11   = 56 = 28+4*7
WEEK 6: 6+7+8+9+10+11+12  = 63 = 28+5*7
WEEK 7: 7+8+9+10+11+12+13 = 70 = 28+6*7

OR in other words ---->
=> 28*F + 7 * (F*(F-1)/2)     Where F is the number of full weeks
=> (28*F + 7*F*(F-1))/2
=> 7/2 * F * (F+7) <--------------------------- We use this formula
=> 7/2 * 7 * (7+7) = 7/2*7*14 = 7*7*7 = 343

For not a full week, we can apply the AP series sum formula ----->
S = n/2 (2a + (n-1)*d)        Where --> a=F+1, d=1, n=number of days in not full week
S = R/2 * (2(F+1) + (R-1)) <------------------- We use this formula
```

### Code (typescript)
```Typescript
function totalMoney(n: number): number {
    const F:number = Math.floor(n/7); // full weeks
    const R:number = n%7; // days in not full weeks

    const fullWeekCollection:number = (7/2) * F * (F+7); // derived formula
    const notFullWeekCollection:number = (R/2) * (2*(F+1) + (R-1)); // AP series sum formula

    return fullWeekCollection+notFullWeekCollection;
}
```

### 🧮 Example

For `n = 54`:

```text
F = 7, R = 5
Full weeks = 7/2 * 7 * (7 + 7) = 343
Remaining  = 5/2 * (2*(7 + 1) + 4) = 5/2 * (16 + 4) = 5 * 10 = 50
Total = 343 + 50 = 393 ✅
```

### ⏱️ Complexity

- **Time:** `O(1)`
- **Space:** `O(1)`

---

## ⚖️ Comparison — All Three Approaches

| # | Approach | Time | Space | Pros | Cons |
|---:|---|---:|---:|---|---|
| 1 | Simulation (week-by-week/day-by-day) | `O(n/7)` ~ `O(n)` worst (but small) | `O(1)` | Very intuitive, easy to implement and debug | Slightly slower, involves loop; unnecessary work for large `n` |
| 2 | Weekly Math (loop over weeks, AP for remainder) | `O(fullWeeks)` ~ `O(n/7)` | `O(1)` | Cleaner than simulation; less repeated arithmetic | Still uses a short loop (tiny cost) |
| 3 | Pure Math (closed-form O(1)) | `O(1)` | `O(1)` | Fastest, no loops, mathematically concise | Requires deriving the formula (minor cognitive cost) |

**Which to choose**
- For readability and quick coding: Approach **2** is great.  
- For best performance and minimal code: Approach **3** (closed form) is ideal — recommended for production or library code.  
- Approach **1** is fine for learning, tests, or when you need an easy-to-follow simulation.

---

## ⏱️ Complexity Summary

- Simulation / Weekly loop approaches: `O(n/7)` time, `O(1)` space.  
- Closed-form approach: `O(1)` time, `O(1)` space.

Given the constraint `n ≤ 1000`, all approaches are practically instant; Approach 3 is mathematically optimal.

---

## 🧩 Example Walkthroughs (quick checks)

| n | Explanation (F = full weeks, R = remainder) | Answer |
|---:|---|---:|
| `1`  | F=0, R=1 → rem = 1 → total = `1` | `1` |
| `7`  | F=1, R=0 → one full week → total = `28` | `28` |
| `10` | F=1, R=3 → weeksSum=28, remSum=2+3+4=9 → total = `37` | `37` |
| `20` | F=2, R=6 → weeksSum = `28 + 35 = 63`, remSum = start=3 → `3+4+5+6+7+8 = 33` → total = `96` | `96` |
| `54` | F=7, R=5 → weeksSum = `343`, remSum = `50` → total = `393` | `393` |

---

## ✅ Final Takeaway

- The problem reduces to summing **arithmetic progressions**: weekly totals form an AP of week-sums, and the leftover days form a small AP starting at `1 + fullWeeks`.  
- Derive the closed-form once and you get a clean `O(1)` solution:
  ```typescript
    const F = Math.floor(n / 7);
    const R = n % 7;
    const weeksSum = 7 * F * (F + 7) / 2;
    const remSum = R * (2 * (F + 1) + (R - 1)) / 2;
    return weeksSum + remSum;
  ```

---
