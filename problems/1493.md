# üß© Problem #1493 ‚Äì Longest Subarray of 1's After Deleting One Element

**Difficulty:** Medium  
**Topics:** `Array`, `Sliding Window`, `Two Pointers`  
**Link:** [Leetcode](https://leetcode.com/problems/longest-subarray-of-1s-after-deleting-one-element/description/)

---

## üí° Approach ‚Äì Sliding Window

We maintain a **sliding window** that contains **at most one zero**.  
Since we must delete **exactly one element**, the length of the longest subarray of 1‚Äôs in each valid window is:

```
length = right - left - Math.max(zeros, 1)
```


### Steps:

1. Initialize `left = 0`, `right = 0`, `zeros = 0`, `ans = 0`.
2. Expand the `right` pointer:
   - If `nums[right] === 0`, increment `zeros`.
   - Stop expanding if `zeros > 1`.
3. Update `ans` as `Math.max(ans, right - left - Math.max(zeros,1))`.
4. If `zeros > 1`, contract the `left` pointer until `zeros <= 1`.
5. Continue until `right` reaches the end of the array.

This ensures we always consider **exactly one deletion** and keep the window valid.

---

### Complexity

- **Time:** $$O(n)$$ ‚Äî each element is visited at most twice  
- **Space:** $$O(1)$$ ‚Äî only pointers and counters used

---

### Code

```javascript
var longestSubarray = function(nums) {
    let ans  = 0;
    let zeros = 0;
    let leftIndex = 0;
    let rightIndex = 0;
    
    while(rightIndex < nums.length){
        // Expand window
        while((rightIndex < nums.length) && (zeros < 2)){
            if(nums[rightIndex] !== 1) zeros++;
            rightIndex++;
        }
        
        // Update answer
        ans = Math.max(ans, (rightIndex - leftIndex - Math.max(zeros, 1)));
        
        if(rightIndex === nums.length) break;
        
        // Contract window
        while(zeros > 1){
            if(nums[leftIndex] !== 1) zeros--;
            leftIndex++;
        }
    }
    return ans;
};
```

### üèÜ Final Notes

- Classic sliding window problem with a twist: must delete one element.
- `Math.max(zeros,1)` handles both windows with 0 or 1 zeros correctly.
- Optimal $$O(n)$$ time and $$O(1)$$ space for given constraints.
