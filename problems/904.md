
# ðŸ§© Problem #904 - Fruit Into Baskets

**Difficulty:** Medium  
**Topics:**  `Array`, `Sliding Window`, `Hash Map`  
**Link:** [Leetcode](https://leetcode.com/problems/fruit-into-baskets/description/)

## ðŸš€ Approach - Shrinking and Expanding Window

- Use a sliding window to track at most 2 types of fruits.
- Expand the window (move right) while the condition is valid.
- Contract the window (move left) when more than 2 fruit types are present.

## ðŸ“ˆ Complexity

- **Time Complexity**: $$O(n)$$.

- **Space Complexity**: $$O(1)$$ beasue at max map can contain 3 keys only.

---

## âœ… Code

```javascript []
var totalFruit = function(fruits) {
    if(fruits.length <= 2) return fruits.length;

    const store = new Map();
    let ans = 2;
    let rightIndex = 1;
    let leftIndex = 0;

    function addElementInMap(element){
        if(store.has(element)) store.set(element, store.get(element)+1);
        else store.set(element, 1);
    }

    function removeElementInMap(element){
        if(store.has(element)){
            if(store.get(element) === 1) store.delete(element);
            else store.set(element, store.get(element)-1);
        }
    }

    addElementInMap(fruits[0]);
    addElementInMap(fruits[1]);

    while(rightIndex < fruits.length){
        // Expanding window
        while((rightIndex < fruits.length) && (store.size <= 2)) {
            rightIndex++;
            if(rightIndex < fruits.length) {
                addElementInMap(fruits[rightIndex]);
            }
        }

        ans = Math.max(ans, rightIndex-leftIndex);
        if(rightIndex === fruits.length) break;

        // Contracting window
        while(store.size > 2){
            removeElementInMap(fruits[leftIndex]);
            leftIndex++;
        }
    }
    return ans;
};
```

